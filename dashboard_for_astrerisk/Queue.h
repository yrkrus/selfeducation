//////////////////////////////////////////////////////
//													//	        
//			by Petrov Yuri 01.06.2024				//
//	      парсинг звонков попадающих в Очередь		//
//													//	
//////////////////////////////////////////////////////


#ifndef QUEUE_H
#define QUEUE_H

#include <string>
#include <vector>
#include <iostream>

namespace QUEUE
{
	enum Currentfind
	{
		phone_find,
		waiting_find,
		queue_find,
	};

	struct Pacients
	{
		std::string phone	{ "null" };		// текущий номер телефона который в очереди сейчас
		std::string waiting { "null" };		// время в (сек) которое сейчас в очереди находится
		std::string queue	{ "null" };		// номер очереди
	};

	class Parsing
	{
	public:
		Parsing(const char *fileQueue);
		~Parsing();

		bool isExistList();					// есть ли очередь	
		void show();
		void insertData();					// добавление данных в БД
		bool isExistQueueAfter20hours();	// проверка есть ли не отвеченные записи после 20:00
		void updateQueueAfter20hours();		// обновление данных если звонок пришел того как нет активных операторов на линии

	private:
		std::string findParsing(std::string str, QUEUE::Currentfind find); // парсинг  
		std::vector<QUEUE::Pacients> pacient_list;	
		
	};
}

#endif //QUEUE_H
